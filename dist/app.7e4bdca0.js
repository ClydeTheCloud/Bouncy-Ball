parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"A2T1":[function(require,module,exports) {
let e=document.querySelector(".ball");const t=document.querySelector(".action"),n=document.querySelectorAll(".layer"),o=document.querySelector(".tap-zone"),l=document.querySelector(".wrapper"),r=document.querySelector(".game-view"),a=document.querySelector(".player-name"),d=document.getElementById("game-over-label"),c=document.getElementById("start-label"),i=document.querySelector(".warning"),s=document.getElementById("score"),u=document.getElementById("high-score"),m=document.querySelector(".change-name-btn"),p=document.querySelector(".leaderboard-btn"),h=document.querySelector(".settings"),y=document.querySelector(".quality-btn"),f=document.querySelector(".modal-name"),g=document.querySelector(".modal-leaderboard"),b=document.querySelector(".leaderboard-wrapper"),E=document.querySelector(".modal-leaderboard .popup"),L=document.querySelector(".name-btn"),v=document.querySelector(".warning-text"),T=document.querySelector(".close-leaderboard");let S,x=!1,C=.91,w=!0,q=!1,M=0,H=0,I=0,$=1,k="click",A=localStorage.getItem("bouncy-quality")||"high";y.textContent=`Quality: ${A}`;let j=[],B=[],z=[];const P="https://bouncy-server.herokuapp.com/score";function D(e){("touchstart"===k||"click"===k&&" "===e.key)&&(e.preventDefault(),w&&q?N():x||w||(x=!0,O()))}function N(){if(I=0,s.innerHTML=`Score: ${I}`,M=0,x=!1,$=1,w=!1,q=!1,d.style.display="none",o.innerHTML="Jump",!e){const n=document.createElement("div");for(let e=0;e<4;e++){const e=document.createElement("div");e.classList.add("quarter"),n.appendChild(e)}n.classList.add("ball"),t.appendChild(n),e=n}Q(),J(),c.style.display="none",h.style.display="none"}function O(){let t=100,n=setInterval(()=>{if(e){if(Math.abs(t-M)<1){clearInterval(n),B=B.filter(e=>e!==n);let t=setInterval(()=>{e&&(M-=10,(M/=C)<=0&&(M=0,clearInterval(t),B=B.filter(e=>e!==t),x=!1),e.style.bottom=M+"px")},20);B.push(t)}t=M,M+=10,M*=C,e.style.bottom=M+"px"}},20);B.push(n)}function J(){let e=5e3*Math.random()+5e3,t=setTimeout(()=>{w||($=(Number($)+.1).toFixed(1),J(),j.filter(e=>e!==t))},e);j.push(t)}function Q(){let e=3e3*Math.random()+1e3,n=1e3;const o=document.createElement("div");o.classList.add("obstacle"),o.classList.add(A),t.appendChild(o),o.style.left=n+"px";let l=setInterval(()=>{n>0&&n<60&&M<60&&(Y(),clearInterval(l)),n-=2*$,o.style.left=n+"px"},2);B.push(l);let r=setInterval(()=>{n<-60&&(t.removeChild(o),I+=10*$,s.innerHTML=`Score: ${I}`,clearInterval(r),clearInterval(l),B=B.filter(e=>e!==r))},50);B.push(r);let a=setTimeout(()=>{w||(Q(),j.filter(e=>e!==a))},e);j.push(a)}async function Y(){for(B.forEach(e=>{clearInterval(e)}),B=[],j.forEach(e=>{clearTimeout(e)}),j=[],d.style.display="flex",c.style.display="block",h.style.display="flex",w=!0;t.firstChild;)t.removeChild(t.lastChild);if(e=null,o.innerHTML="Start",I>H){q=!1,g.style.display="flex",b.innerHTML="<p>Loading, please wait...</p>";const e=await F();K(e.leaderboard,e.personal)}else q=!0}async function F(){const e=await fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,score:I})}).then(e=>e.json()).catch(e=>{te(e)});return H=e.personal.score,u.innerHTML=`High score: ${H}`,e}function R(){b.innerHTML="<p>Loading, please wait...</p>",fetch(P).then(e=>e.json()).then(e=>K(e)).catch(e=>{te(e)})}function G(e){e.stopPropagation(),q=!1,g.style.display="flex",R()}function K(e,t){if("object"==typeof e){if(leaderboardTable=V(e),b.innerHTML="",b.appendChild(leaderboardTable),t)if(t.position<11){document.querySelector(`.modal-leaderboard tbody tr:nth-child(${t.position})`).classList.add("player-in-leaderboard")}else{const e=document.querySelector(".modal-leaderboard tbody"),n=document.createElement("tr"),o=document.createElement("td");o.innerText=t.position;const l=document.createElement("td");l.innerText=t.name;const r=document.createElement("td");r.innerText=t.score,n.appendChild(o),n.appendChild(l),n.appendChild(r),e.appendChild(n)}}else"string"==typeof e&&(b.innerHTML=`<h2>${e}</h2>`)}function U(e){e.stopPropagation(),g.style.display="none",q=!0}function V(e){const t=document.createElement("table"),n=document.createElement("thead");t.appendChild(n);const o=document.createElement("tr");n.appendChild(o);const l=document.createElement("th");l.innerText="#:";const r=document.createElement("th");r.innerText="Name:";const a=document.createElement("th");a.innerText="Score:",o.appendChild(l),o.appendChild(r),o.appendChild(a);const d=document.createElement("tbody");return t.appendChild(d),e.forEach((e,t)=>{const n=document.createElement("tr"),o=document.createElement("td");o.innerText=t+1;const l=document.createElement("td");l.innerText=e.name;const r=document.createElement("td");r.innerText=e.score,n.appendChild(o),n.appendChild(l),n.appendChild(r),d.appendChild(n)}),t}function W(e){fetch(`${P}/${e}/`).then(e=>e.json()).then(e=>{e.score?(H=e.score,u.innerHTML=`High score: ${H}`):(H=0,u.innerHTML="High score: none")}).catch(e=>{te(e)})}function X(){n.forEach((e,t,n)=>{Z(e,t,n.length)})}function Z(e,t,n){const o=1e3*(2*Math.random()+2/$);if("low"!==A){const n=t+1,o=30/n/$;let l=1050;const r=Math.round(10*Math.random()+60)+20*n,a=document.createElement("div");a.classList.add("background-element"),a.classList.add(A),e.appendChild(a),a.style.left=l+"px",a.style.height=Math.round(60*Math.random()+60)*n+"px",a.style.width=Math.round(50*Math.random()+50)*n+"px",a.style.backgroundColor=`rgb(${r}, ${r}, ${r+40})`,a.style.zIndex=n,a.style.padding=10*n+"px";const d=Math.round((parseInt(a.style.height)-25)/(30*n));if("high"===A)for(let e=0;e<d;e++){const e=document.createElement("div");e.classList.add("row"),a.appendChild(e);const t=parseInt(a.style.width)>20*n*3?3:2;for(let o=0;o<t;o++){const t=document.createElement("div");t.classList.add("window"),t.style.height=10*n+"px",t.style.width=10*n+"px",e.appendChild(t)}}a.style.animationDuration=o+"s";let c=setTimeout(()=>{e.removeChild(a),z.filter(e=>e!==c)},1e3*o);z.push(c)}setTimeout(()=>{Z(e,t,n)},o)}function _(e){e.preventDefault();const t=document.getElementById("name").value.trim();let n=new RegExp(/^[a-z0-9]+$/i).test(t),o=t.length>2&&t.length<14;return n&&o?(S=t,f.style.display="none",q=!0,c.style.display="block",h.style.display="flex",a.innerHTML=S,W(S)):n?(i.removeAttribute("hidden"),v.innerHTML="Minimum 3, maximum 13 characters"):(i.removeAttribute("hidden"),v.innerHTML="Only letters and numbers are allowed."),!1}function ee(e){f.style.display="flex",q=!1,c.style.display="none",h.style.display="none"}function te(e){const t=document.createElement("div"),n=document.querySelector(".wrapper");t.innerHTML=`<p>Something went wrong: ${e}</p>`,t.classList.add("error-popup"),n.appendChild(t),setTimeout(()=>{n.removeChild(t)},5e3)}function ne(e){e.stopPropagation(),"low"===A?(A="high",document.querySelectorAll(".background-element").forEach(e=>e.classList.replace("low","high"))):"mid"===A?(A="low",document.querySelectorAll(".background-element").forEach(e=>e.remove()),z.forEach(e=>{clearTimeout(e)}),z=[]):"high"===A&&(A="mid",document.querySelectorAll(".window").forEach(e=>e.remove()),document.querySelectorAll(".background-element").forEach(e=>e.classList.replace("high","mid"))),localStorage.setItem("bouncy-quality",A),y.textContent=`Quality: ${A}`}function oe(){if(screen.width<1e3){const e=screen.width;l.classList.add("fullscreen");const t=e/1100;r.style.transform=`scale(${t>1?1:t})`,o.style.transform=`scale(${t>1?1:t}) translateY(-50%)`}else l.classList.remove("fullscreen"),r.style.transform="",o.style.transform="translateY(-50%)"}"ontouchstart"in document.documentElement?(k="touchstart",o.style.display="flex",c.innerHTML="<h2>Tap to start</h2>",o.addEventListener("touchstart",D),o.innerHTML="Start"):document.addEventListener("keydown",D),L.addEventListener(k,_),m.addEventListener(k,ee),p.addEventListener(k,G),T.addEventListener(k,U),y.addEventListener(k,ne),window.onresize=oe,oe(),X();
},{}]},{},["A2T1"], null)
//# sourceMappingURL=app.7e4bdca0.js.map